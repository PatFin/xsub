#!/usr/bin/env ruby

root = File.expand_path('../../', __FILE__)
$:.unshift File.expand_path('lib', root)

require 'any_scheduler'
require 'optparse'
require 'json'

Version = AnyScheduler::VERSION

parameters = {}
opt = OptionParser.new
opt.on('-t', '--show-template', 'show template') { |t|
  $stdout.puts AnyScheduler.show_template
  exit
}
opt.on('-s', '--show-param', 'show parameters required in template') { |s|
  $stdout.puts AnyScheduler.params_in_json
  exit
}
opt.on('-p', '--parameters=[PARAM]', 'parameters') {|param|
  parameters = JSON.load(param) if param.size > 0
}
opt.parse!(ARGV)

AnyScheduler.scheduler(:none).submit(ARGV, parameters)
